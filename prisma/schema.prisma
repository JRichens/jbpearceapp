// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Car {
  uniqueId                 String    @default(cuid())
  reg                      String    @id
  vinOriginalDvla          String?
  dvlaMake                 String?
  dvlaModel                String?
  modelSeries              String?
  modelVariant             String?
  nomCC                    String?
  colourCurrent            String?
  dvlaYearOfManufacture    String?
  originCountry            String?
  weight                   String?
  euroStatus               String?
  engineCode               String?
  engineCapacity           String?
  noCylinders              String?
  fuelType                 String?
  transmission             String?
  aspiration               String?
  maxBHP                   String?
  maxTorque                String?
  driveType                String?
  gears                    String?
  vehicleCategory          String?
  imageUrl                 String?
  exportVehicle            Boolean?  @default(false)
  addedToExport            DateTime?
  breakingVehicle          Boolean?  @default(false)
  addedToBreaking          DateTime?
  createdAt                DateTime  @default(now())
  updatedAt                DateTime  @updatedAt
  breaking                 Breaking?
}

model Breaking {
  id          String   @id @default(cuid()) 
  car         Car      @relation(fields: [carReg], references: [reg])
  carReg      String   @unique
  created     DateTime @default(now())
  updated     DateTime @updatedAt
  photos      String[]
}

model Task {
  id             String @default(cuid()) @id
  name           String
  description    String
  checkDate      String?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  completed      Boolean? @default(false)
  completedAt    DateTime?
  completedBy    String?
}

model TaskDetails {
  id             String @default(cuid()) @id
  name           String
  description    String
}

model User {
  id            String         @id @default(cuid())
  clerkId       String
  name          String
  initials      String?
  email         String
  userType      UserType       @relation(fields: [userTypeId], references: [name])
  userTypeId    String
  weightcapture weightcapture[]
}

model UserType {
  id   String @id @default(cuid())
  name String @unique
  User User[]
}

model saveweight {
  id     String   @id @default(cuid())
  weight String
  stable Boolean
  date   DateTime @default(now())
}

model weightcapture {
  id      String   @id @default(cuid())
  weight  String
  date    DateTime @default(now())
  note    String
  userId  String
  user    User     @relation(fields: [userId], references: [id])
}

model Customer {
  id                String @id @default(cuid())
  name              String @unique
  firstLineAddress  String?
  secondLineAddress String?
  townCity          String?
  postcode          String?
  emailpod          String?
  emailinvoice      String?
  mobile            String?
  officephone       String?
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}

model LandArea {
  id          String @id @default(cuid())
  created     DateTime @default(now())
  issuedDate  String
  modified    DateTime @updatedAt
  STid        String @unique
  description String @default("Land Area")
  area        String
  colour      String @default("#008B02")
  centerLat   Float?
  centerLng   Float?
  coordinates String[]
}